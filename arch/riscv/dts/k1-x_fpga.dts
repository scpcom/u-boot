// SPDX-License-Identifier: (GPL-2.0 OR MIT)
/* Copyright (c) 2023 Spacemit, Inc */

/dts-v1/;

#include "k1-x.dtsi"

/ {
	model = "spacemit k1-x fpga board";

	memory@0 {
		device_type = "memory";
		reg = <0x00000000 0x00000000 0x00000000 0x80000000>;
		u-boot,dm-spl;
	};

	chosen {
		bootargs = "earlycon=sbi console=ttyS0,115200 debug loglevel=8,initcall_debug=1 rdinit=/init.tmp";
		stdout-path = "serial0:115200n8";
		u-boot,dm-spl;
	};
};

&uart0 {
	status = "okay";
};

&i2c0 {
	status = "disabled";
};

&i2c1 {
	status = "disabled";
};

&i2c2 {
	status = "disabled";
};

&i2c3 {
	/* SEC_I2C */
	status = "disabled";
};

&i2c4 {
	clock-frequency = <400000>;
	status = "okay";
};

&i2c5 {
	status = "disabled";
};

&i2c6 {
	status = "disabled";
};

&i2c7 {
	status = "disabled";
};

&i2c8 {
	/* PWR_I2C */
	status = "okay";
};

&udc {
	status = "disabled";
};

&usbdrd3 {
	status = "disabled";
	dwc3@c0a00000 {
		maximum-speed = "high-speed";
		dr_mode = "peripheral";
		phy_type = "utmi_wide";
		snps,dis_enblslpm_quirk;
	};
};

&sdhci0 {
	bus-width = <4>;
	broken-cd;
	cap-sd-highspeed;
	sdh-phy-module = <0>;
	status = "okay";
};

/* eMMC */
&sdhci2 {
	bus-width = <8>;
	non-removable;
	cap-mmc-highspeed;
	sdh-phy-module = <1>;
	status = "disabled";
};

&eth0 {
	status = "okay";

	phy-reset-pin = <40>;

	clk_tuning_enable;
	clk-tuning-by-reg;
	tx-phase = <0x1>;
	rx-phase = <0x5>;

	phy-mode = "rgmii";
	phy-addr = <0>;
	phy-handle = <&rgmii>;

	ref-clock-from-phy;

	mdio {
		#address-cells = <0x1>;
		#size-cells = <0x0>;
		rgmii: phy@0 {
			compatible = "ethernet-phy-ieee802.3-c22";
			device_type = "ethernet-phy";
			reg = <0x0>;
		};
	};
};

&pcie0_rc {
	status = "disabled";
};
